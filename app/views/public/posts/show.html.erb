<div class="container d-flex">
  <div class="sidebar col-lg-2">
    <h5><%= link_to "人気投稿", popular_path, class:"link border-bottom" %></h5>
    <div class="search">
      <%= form_with url: search_path, method: :get do |f| %>
        <%= f.text_field :keyword, value: @keyword, style: "width:160px" %>
        <%= f.submit "検索", class: "btn btn-info" %>
      <% end %>
    </div>
    <div class="dropdown">
      <button type="button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        ジャンル別
      </button>
      <div class="dropdown-menu">
        <% @genres.each do |genre| %>
          <%= link_to genre_path(genre.id) do %>
            <p class="dropdown-item"><%= genre.name %></p>
          <% end %>
        <% end %>
      </div>
    </div>
    <h4>駅一覧</h4>
    <table class="table">
      <thead class="table-active">
        <tr>
          <th>駅</th>
        </tr>
      </thead>
      <tbody>
        <% @stations.each do |station| %>
        <tr>
          <td>
            <%= link_to station_path(station.id) do %>
              <%= station.name %>
            <% end %>
          </td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <div>
    <p class = "notice"><%= notice %></p>
    <div class="d-flex">
      <p class="station title"><%= "<" +  @post.station.name + "駅>"  %></p>
      <p class="genre_name"><%= @post.genre.name %></p>
    </div>
    <div class="show_post_contents">
      <div>
        <%= image_tag @post.image, size: "700x500" %>
      </div>
      <%= @post.message %><br>
      <%= @post.user.name %>
      <% if @post.favorited_by?(current_user) %>
        <p class="show_favorite">
          <%= link_to post_favorites_path(@post), method: :delete do %>
            ♥<%= @post.favorites.count %> いいね
          <% end %>
        </p>
      <% else %>
        <p class="show_favorite">
          <%= link_to post_favorites_path(@post), method: :post do %>
            ♡<%= @post.favorites.count %> いいね
          <% end %>
        </p>
      <% end %>
      <%= "コメント件数：" + @post.post_comments.count.to_s %>
      <% if @post.user.id == current_user.id %>
      <div class="float-right">
        <%= link_to "編集する", edit_post_path(@post.id), class:"btn btn-outline-success edit_btn" %>
        <%= link_to "削除する", post_path(@post.id), method: :delete, data: {confirm: "削除しますか？"}, class:"btn btn-outline-dark destroy_btn" %>
      </div>
      <% end %>
      <p class="comment">コメント</p>
      <table>
        <% @post.post_comments.each do |post_comment| %>
        <tr>
          <td class="col-lg-2"><%= post_comment.user.name %></td>
          <td><%= post_comment.comment %></td>
          <% if post_comment.user.id == current_user.id %>
            <td><%= link_to "削除する", post_post_comment_path(post_comment.id), method: :delete, class:"btn" %></td>
          <% end %>
        </tr>
        <% end %>
      </table>
      <%= form_with model: [@post, @post_comment] do |f| %>
        <%= f.text_area :comment, rows: '1', placeholder: "コメントをここに", size: "65x2"  %>
        <%= f.submit "送信する" %>
      <% end %>
    </div>
  </div>
</div>